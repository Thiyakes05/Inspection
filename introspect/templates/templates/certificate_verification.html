<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Certificate Verification</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #e9f7fe; /* Light blue background */
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full height for centering */
            overflow: hidden; /* Prevent scroll */
        }
        .container {
            max-width: 1000px; /* Increase max width for more space */
            padding: 60px; /* More padding for spacious design */
            background-color: white;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.2); /* Stronger shadow */
            text-align: center;
            border-radius: 12px; /* Smooth corners */
            animation: fadeIn 0.5s; /* Fade-in animation */
        }
        h1 {
            font-size: 36px; /* Larger heading */
            margin-bottom: 20px;
            color: #0056b3; /* Heading color */
        }
        p {
            font-size: 22px; /* Larger paragraph */
            margin-bottom: 30px;
            color: #333; /* Darker text for readability */
        }
        input[type="file"] {
            padding: 15px;
            margin: 30px 0;
            border: 2px solid #0056b3; /* Darker border */
            border-radius: 5px;
            width: calc(100% - 34px); /* Full width minus padding */
            cursor: pointer;
            font-size: 18px; /* Increase font size */
        }
        .progress-container {
            width: 100%;
            background-color: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
            display: none; /* Initially hidden */
        }
        .progress-bar {
            width: 0;
            height: 25px; /* Slightly taller progress bar */
            background-color: #0056b3; /* Progress bar color */
            transition: width 0.5s;
        }
        button {
            background-color: #0056b3;
            color: white;
            border: none;
            padding: 15px 30px; /* Increase button size */
            border-radius: 5px;
            cursor: pointer;
            font-size: 20px; /* Increase font size */
            margin-top: 30px;
            transition: background-color 0.3s; /* Smooth transition */
            display: none; /* Initially hidden */
        }
        button:hover {
            background-color: #004494; /* Darker blue on hover */
        }
        .uploaded-documents {
            margin-top: 20px;
            text-align: left;
            max-width: 100%; /* Ensure it doesn't overflow */
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Certificate Verification</h1>
    <p>Please upload all documents below:</p>
    <input type="file" id="fileInput" multiple onchange="uploadFiles()" />
    
    <button id="addDocumentButton" onclick="addDocument()">Add Document</button>
    
    <div class="progress-container" id="progressContainer">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="uploaded-documents" id="uploadedDocuments"></div>
    
    <div class="submit-button">
        <button id="submitButton" onclick="finishTask()">Submit</button>
    </div>
</div>

<script>
    let totalFiles = 0;
    let filesUploaded = 0;
    const uploadedFiles = []; // Array to store uploaded file names

    function uploadFiles() {
        const fileInput = document.getElementById('fileInput');
        const progressContainer = document.getElementById('progressContainer');
        const progressBar = document.getElementById('progressBar');
        const submitButton = document.getElementById('submitButton');
        const uploadedDocuments = document.getElementById('uploadedDocuments');

        if (fileInput.files.length === 0) {
            alert('Please select at least one file to upload.');
            return;
        }

        totalFiles = fileInput.files.length; // Get total number of files
        progressContainer.style.display = 'block'; // Show progress container
        progressBar.style.width = '0'; // Reset progress bar

        const total = 100; // Simulated total upload size
        filesUploaded = 0; // Initialize uploaded size

        const uploadFile = (file) => {
            // Simulate file upload process
            const interval = setInterval(() => {
                if (filesUploaded < total) {
                    filesUploaded += 10; // Simulate upload progress
                    const percent = ((filesUploaded / total) * 100) / totalFiles; // Adjust for multiple files
                    progressBar.style.width = percent + '%';
                } else {
                    clearInterval(interval);
                    uploadedFiles.push(file.name); // Add file name to uploaded files array
                    updateUploadedFilesList(uploadedFiles); // Update the list of uploaded files
                    alert(`Upload of ${file.name} complete!`);
                    if (uploadedFiles.length === totalFiles) {
                        submitButton.style.display = 'block'; // Show submit button after all uploads complete
                    }
                }
            }, 500); // Update progress every half second
        };

        for (let i = 0; i < totalFiles; i++) {
            uploadFile(fileInput.files[i]); // Start upload for each file
        }
    }

    function addDocument() {
        const fileInput = document.getElementById('fileInput');
        fileInput.click(); // Trigger file input click
    }

    function updateUploadedFilesList(files) {
        const uploadedDocuments = document.getElementById('uploadedDocuments');
        uploadedDocuments.innerHTML = '<h3>Uploaded Documents:</h3>'; // Reset the list
        files.forEach(file => {
            const listItem = document.createElement('p');
            listItem.textContent = file;
            uploadedDocuments.appendChild(listItem);
        });
    }

    function finishTask() {
        // Mark the task as completed in localStorage
        localStorage.setItem('certificateVerificationCompleted', 'true');

        // Redirect to the previous page
        window.location.href = 'inspection.html';
    }
</script>

</body>
</html>
